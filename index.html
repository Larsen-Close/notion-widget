import React, { useState } from 'react';
import { Server, Cpu, Network, Globe, CloudCog } from 'lucide-react';

const ClusterInfrastructure = () => {
  const [selectedComponent, setSelectedComponent] = useState(null);

  const componentInfo = {
    loadbalancer: {
      title: "Load Balancer",
      details: "DigitalOcean Load Balancer handling traffic distribution (TCP 6443/50000) with health checks"
    },
    controlplane: {
      title: "Control Plane/Worker Nodes",
      details: "3x nodes running Talos v1.8.3, handling both control plane operations and workloads. Kubernetes v1.31.3"
    },
    networking: {
      title: "Networking",
      details: "VPC CIDR 10.10.10.0/24, CNI: Calico, integrated with Cloudflare for DNS and Access Management"
    }
  };

  return (
    <div className="bg-white p-6 rounded-lg shadow-lg">
      <div className="mb-6">
        <h2 className="text-2xl font-bold mb-2">NauticalNodes Cluster Infrastructure</h2>
        <p className="text-gray-600">Talos v1.8.3 | Kubernetes v1.31.3 | Region: SFO3</p>
        <p className="text-sm text-gray-500 mt-1">Control plane nodes configured for dual control/worker role</p>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* External Access Layer */}
        <div className="col-span-full bg-blue-50 p-4 rounded-lg">
          <div className="flex items-center justify-center gap-4 mb-4">
            <Globe className="h-6 w-6 text-blue-600" />
            <CloudCog className="h-6 w-6 text-blue-600" />
          </div>
          <div className="text-center text-sm font-medium text-blue-800">
            CloudFlare DNS & Access Management
          </div>
        </div>

        {/* Load Balancer */}
        <div 
          className="col-span-full bg-purple-50 p-4 rounded-lg cursor-pointer hover:bg-purple-100 transition-colors"
          onClick={() => setSelectedComponent('loadbalancer')}
        >
          <div className="flex items-center justify-center mb-2">
            <Network className="h-8 w-8 text-purple-600" />
          </div>
          <div className="text-center font-medium">DigitalOcean Load Balancer</div>
        </div>

        {/* Combined Control Plane/Worker Nodes */}
        <div 
          className="col-span-full bg-green-50 p-4 rounded-lg cursor-pointer hover:bg-green-100 transition-colors"
          onClick={() => setSelectedComponent('controlplane')}
        >
          <div className="flex items-center justify-center gap-4 mb-2">
            <Cpu className="h-8 w-8 text-green-600" />
            <Server className="h-8 w-8 text-green-600" />
          </div>
          <div className="text-center">
            <div className="font-medium">Control Plane + Worker Nodes</div>
            <div className="text-sm text-gray-600">3 Nodes (Dual Role)</div>
          </div>
        </div>

        {/* Network Details */}
        <div 
          className="col-span-full bg-indigo-50 p-4 rounded-lg cursor-pointer hover:bg-indigo-100 transition-colors"
          onClick={() => setSelectedComponent('networking')}
        >
          <div className="flex items-center justify-center mb-2">
            <Network className="h-8 w-8 text-indigo-600" />
          </div>
          <div className="text-center">
            <div className="font-medium">Network Configuration</div>
            <div className="text-sm text-gray-600">VPC & CNI</div>
          </div>
        </div>

        {/* Info Panel */}
        {selectedComponent && (
          <div className="col-span-full mt-6 bg-gray-50 p-4 rounded-lg">
            <h3 className="font-bold text-lg mb-2">{componentInfo[selectedComponent].title}</h3>
            <p className="text-gray-700">{componentInfo[selectedComponent].details}</p>
          </div>
        )}
      </div>
    </div>
  );
};

export default ClusterInfrastructure;
